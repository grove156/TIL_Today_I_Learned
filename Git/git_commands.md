# Git 사용법

## **1. git 환경설정**
```shell
$ git config --global user.name "{{user name}}"
$ git config --global user.email "{{user email}}"
```
* git config user.name과 user.email은 커밋할 경우 커밋한 사용자 정보를 표시하기위해 사용
* --global 옵션은 모든 리파지토리에 적용시키는 전역설정임

--- 
## **2. git 버전관리**
### 2.1 git 저장소 만들기
```shell
$ git init 
```
* 해당 디렉토리를 깃 로컬 저장소로 만들기 (깃 저장소로 초기화)
* git init 명령어 사용시 숨김파일로 .git 이라는 파일이 생성되는데, 그파일에 해당 저장소의 정보가 들어있으므로 삭제시 깃 저장소에서 헤제됨
* .gitignore 파일에 변경한 내용을 추적하고 싶지 않은 파일이름을 적어 넣으면 해당 파일은 깃에서 변경내용을 추적하지 않음(보안상 깃헙에 올리지 말아야할 파일들)

  
### 2.2 버전 만들기

```shell
$ git add {{file name}}

```
* git add {{file명}} 명령어는 해당 파일을 스테이지에 올림
* git add . 은 해당 디렉토리에 있는 모들 파일을 스테이지에 올림
    
---
```shell
$ git commit -m "{{커밋 메세지}}"
$ git commit -am "{{커밋 메세지}}"
$ git commit -amend
```
* 스테이지에 있는 파일들을 묶어서 버전으로 만듬 
* 메세지는 나중에 확인하기위해 사용
* -am 옵션은 수정한 파일을 스테이지에 add + commit을 동시에 수행하게 하는 옵션
* --amend 옵션은 최신 커밋의 메세지를 수정할 수있음(vim으로 열림)
### 2.3 커밋내용 확인하기
```shell
$ git status
```
* git status는 현재 저장소에서 스테이지에 율라간게 있는지, 수정후 아직 커밋 안된 파일들이 있는지 확인해주는 명령어

---
```shell
$ git log
$ git log --stat
```
* git log는 커밋한 기록을 확일할 수 있는 명령어
* --stat 옵션은 커밋에 관련된 파일까지 함께 볼수 있게하는 옵션

---
```shell
$ git diff 
```
* git diff 명령어를 쓰면 스테이지에 올라온 파일과 최신커밋을 비교해서 무엇이 변경되었는지 확인할 수 있다

### 2.4 커밋 되돌리기
**작업트리 변경내용 되돌리기**
```shell
$ git checkout -- {{파일명}}
```
* 작업트리(스테이징 되기 전단계)에 변경된 내용을 되돌리는 명령어
---
**스테이징 되돌리기**
```
$ git reset HEAD {{파일명}}
```
* 해당 파일을 staged -> unstaged로 내리는 명령어
* 즉, 해당 파일의 변경내용은 작업트리에 남아있음
---
**커밋 되돌리기**
```shell
$ git reset HEAD^
$ git reset --soft HEAD^
$ git reset --mix HEAD^
$ git reset --hard HEAD^ 
$ git reset {{커밋 해시}}
```
* git reset HEAD^ 명령어는 최근 커밋을 취소하는 명령어
* git reset HEAD^는 --soft/mix/hard와 같은 옵션과 같이 쓰일수도 있음(없을경우 --mix가 디폴트)
* git reset {{커밋 해시}} 명령어는 해당 커밋 해시값을 가진 커밋으로 되돌아갈 수 있음

|명령|설명|
|:---:|:---:|
|--soft HEAD^|최근 커밋을 스테이징 상태로 되돌리기|
|--mix HEAD^|최근 커밋을 작업트리 상태로 되돌림|
|--hard HEAD^|최근 커밋을 스테이징 및 파일수정 하기 전 상태로 돌림(최신 커밋 변경내용 완전히 삭제)|

**커밋 삭제하지 않고 되돌리기**
```
$ git revert {{커밋 해시}}
```
* revert는 해당 커밋으로 되돌릴때 삭제하는 것이 아니라 해당 커밋으로 새로 다시 커밋하기 때문에 기록이 삭제되지않고 남아있음


## **3. 브랜치**
### 3.1 브랜치 생성
**브랜치 만들기**
```shell
$ git branch
$ git branch {{브랜치 이름}}
```
* git branch {{브랜치 이름}} 으로 브랜치 생성
* git branch 로 이름없이 쓰면 해당 저장소의 모든 브랜치를 볼 수 있음
---
**브랜치 이동**
```
$ git checkout {{브랜치 이름}}

```
* 해당이름의 브랜치로 이동
---
### 3.2 브랜치 정보 확인하기
```
$ git log --oneline --branches --graph
```
* --oneline 옵션은 해당 커밋내용은 한줄로 표시해줌
* --branches 옵션은 다른 브랜치에서 커밋한 내용까지 모두 보여줌
* --graph 옵션은 --branches 옵션과 함께 쓰이며 브랜치를 그래프로 표시해줌
---
### 3.3 브랜치 병합
```
$ git merge {{병합할 브랜치 이름}}
```
* 현재 브랜치에서 특정 브랜치를 병합하기 위해서 사용하는 명령어
* 현재브랜치에 {{병합할 브랜치 이름}}가 병합됨

**병합시 충돌이 날 경우 IDE를 열어서 직접 수정 후 저장 그리고 커밋하면 됨** 
```
<<<<<HEAD
{{메인 브랜치 충돌내용1}}
=======
{{병합 브랜치 충돌내용2}}
>>>>>

//해당 부분을 IDE를 열어서 수동으로 수정해서 저장해 주면 됨 <<<<====>>>> 부분도 역시 지워줌
```

---
### 3.4 브랜치 삭제
```
$ git branch -d {{삭제할 브랜치 이름}}
```
* 브랜치를 병합후 필요가 없게되면 해당 명령어도 삭제할 수 있다
---
### 3.5 git stash(수정중인 파일 커밋하지 않고 치워두기)
```
$ git stash
$ git stash pop
$ git stash drop 
```
* 수정하던 내용을 커밋하지 않고 다르브랜치로 체크아웃을 할수 없음
* 이 때 git stash를 써서 수정한 내용을 커밋하지 않고 잠시 치워둘 수 있음
* git stash는 stack구조이며 git stash pop명령어로 최근에 stash한 내용을 꺼내올 수 있음
* git stash drop은 가장 최근 stash한 내용을 삭제한다

## **4. Github**
### 4.1 깃허브에 연동하기
```
$ git remote add origin {{원격 저장소 주소}}
```
* 로컬저장소와 원격 저장소를 처음 연동할 때 사용함
* origin은 원격저장소 닉네임이므로 언제든 다른이름으로 변경 가능하지만 대체로 origin으로 씀
* 만약에 로컬저장소와 2개 이상의 원격 저장소가 연동 되어있다면 origin말고 다른 닉네임을 사용하여 연동해야함

### 4.2 연동된 원격저장소 확인
```
$ git remote -v
```
* 해당 로컬저장소에 연동된 모든 원격저장소를 확인할 수 있다

### 4.3 깃허브에 변경된 내용 올리기
```
$ git push -u origin {{깃허브의 브랜치 명}}
```
* -u 옵션은 현재 체크아웃중인 로컬브랜치와 깃허브의 원격브랜치를 연동하기 위한 옵션이므로 처음에만 사용하면 됨
* origin이라는 원격저장소의 {{깃허브 브랜치명}}에 push를 하는 명령어

### 4.4 깃허브에서 변경된 내용 가져오기

**pull**
```
$ git pull origin {{원격저장소의 가져올 브랜치 명}}
```
* 깃허브에서 변경된 내용이 있는 경우 로컬브랜치로 가져오는 명령어

**fetch**
```
$ git fetch 
```
* pull이 깃허브에서 가저온 내용을 로컬저장소에 바로 반영한다면, fetch는 가져오기만 할뿐 로컬브랜치에서 반영을 따로 해줘야한다.
* 보통 원격저장소에서 가져오기 전에 변경내용을 미리 확인하고 싶다면 fetch를 사용함
---
```
$ git checkout FETCH_HEAD
```
* fetch로 가져온 내용을 확인하고 싶을때 사용하는 명령어

---
```
$ git merge FETCH_HEAD
```
* fetch로 가져온 내용을 병합시킴 = pull로 가져온 상태와 이제서야 같아짐

4.5 git clone(최초에 원격저장소에서 로컬저장소로 가져오기)
```
$ git clone {{원격저장소 주소}}
```